# ki4so服务端登录接口
## /login.do
### 情况1：无参数。
当无任何参数，没有认证凭据的情况下访问该接口，则返回值为默认的。
#### 无参数
#### 返回值
返回值是默认的登录页面，提示让用户输入认证凭据。目前不支持自定义登录页面地址。

### 情况2：有默认的认证凭据，即用户名和密码。
#### 参数列表
* username。登录用户标识。必须参数。
* password。登录密码。必须参数。
* service。用户需要访问的服务URL地址。可空参数。若该参数有则表示用户认证通过后需要以当前用户身份返回到该URL对应的服务。

### 返回值
返回值根据输入的参数不同，可能有多种不同的返回值情况，主要有以下几种可能性。
* 若用户名和密码认证失败。则返回到登录页面，并且认证失败的错误信息展示给用户展示。
* 若用户名和密码认证成功。则返回到默认的登录成功页面。并且会将KI4SO_SERVER_EC的参数写回到cookie中。
* 若用户名和密码认证成功，并且该service有一个对应的应用，则返回到该service参数指定的URL地址。并且会携带一个登录该应用的一个参数值，该参数值的名称是：ki4so_cli_ec_key。

### 情况3：携带了加密后的认证凭据。
### 参数：
* KI4SO_SERVER_EC。参数名是这个，参数的来源可以是cookie或者http参数均可以。是由ki4so服务器写回客户端的一个加密字符串，不可仿造该参数的值。
* 若加密凭据认证失败。则返回到登录页面，并且认证失败的错误信息展示给用户展示。
* 若加密凭据认证成功。则返回到默认的登录成功页面。
* 若加密凭据认证成功，并且该service有一个对应的应用，则返回到该service参数指定的URL地址。并且会携带一个登录该应用的一个参数值，该参数值的名称是：ki4so_cli_ec_key。

# ki4so服务端登出接口
## /logout.do
该接口实现了统一登出当前用户登录过的所有应用的特性。
#### 参数列表
* service。用户登出后需要访问的服务URL地址。可空参数。若该参数有则表示服务端登出后需要以当前用户身份返回到该URL对应的服务。
* KI4SO_SERVER_EC。参数名是这个，参数的来源可以是cookie或者http参数均可以。是由ki4so服务器写回客户端的一个加密字符串，不可仿造该参数的值。
#### 返回值
若service参数有值，则跳转到该URL值对应的地址。用户以登出状态访问该URL;
若无service参数，则跳转到ki4so服务器默认的登出页面。

# ki4so客户端登出接口
## /logout.do
该接口实现了将userId对应的用户登出当前客户端应用。
#### 参数列表
* userId。需要登出的用户id。
#### 返回值
返回一个json格式的字符串。
* 登出成功：
{result:true}
* 登出失败：
{result:false, error:"userId不允许为空"}


